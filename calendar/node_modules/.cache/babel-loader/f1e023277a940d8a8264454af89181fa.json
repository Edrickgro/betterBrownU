{"ast":null,"code":"// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, set, onValue } from 'firebase/database'; // TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDLBfzKNUMzRvsP_LeiRf31EJ-mJPVtf0o\",\n  authDomain: \"cs32termproject.firebaseapp.com\",\n  projectId: \"cs32termproject\",\n  storageBucket: \"cs32termproject.appspot.com\",\n  messagingSenderId: \"586091400920\",\n  appId: \"1:586091400920:web:a8a56afdc0bee2fd3ad1ad\",\n  measurementId: \"G-VP24Q6Q0E3\"\n}; // Structure of dates and events as defined in calendar.tsx\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getDatabase();\n/**\n * Put an event into the database \n * \n * TODO: modify to just take a date object?\n * @param eventName \n * @param startTime \n * @param endTime \n * @param info \n * @param date \n * @param eventID \n */\n\nfunction writeEvent(eventName, startTime, endTime, info, date, eventID) {\n  const reference = ref(db, 'Dates/' + date + '/' + eventID);\n  set(reference, {\n    eventName: eventName,\n    startTime: startTime,\n    endTime: endTime,\n    info: info\n  });\n}\n/**\n * Given a string for a date, get all of the events for the date\n * @returns a list of event objects\n */\n\n\nfunction getDateEvents(date) {\n  const eventsRef = ref(db, 'Dates/' + date);\n  let retEvents = []; // get the events at this date\n\n  onValue(eventsRef, snapshot => {\n    // iterate and add each to return list\n    snapshot.forEach(childSnapshot => {\n      const currEvent = childSnapshot.val();\n      retEvents.push(currEvent.val);\n    });\n  });\n  return retEvents;\n}\n/**\n * Get all of the dates that have been added to the database.\n * @returns a list of dateInfo objects\n */\n\n\nfunction getAllDates() {\n  const datesRef = ref(db, 'Dates/'); // const swRef = ref(db, datesRef.key + \"/\" + \"2022-04-29\")\n\n  const swRef = datesRef.child;\n  let retDates = []; // get all dates that have been added\n  //TODO: figure out how to loop through the fucking keys\n\n  onValue(datesRef, snapshot => {\n    // iterate and add each to return list\n    snapshot.forEach(childSnapshot => {\n      //TODO: could be an error depending on how date directories work \"'/' creates an additional layer\"\n      const currEvent = childSnapshot.val();\n      retDates.push(currEvent.val);\n    });\n  });\n  return retDates;\n}\n\nwriteEvent(\"Spring Weekend\", \"18:30\", \"22:30\", \"Annual thing\", \"2022-04-29\", \"0\");\nwriteEvent(\"lunch\", \"12:00\", \"13:00\", \"food optional\", \"2022-04-29\", \"1\"); // TODO: figure out what to export\n\nexport default getAllDates;","map":{"version":3,"sources":["/home/ivan/github/cs32/term-project-ckaleel-eguerre1-hzheng29-ihuerta-nmcgrego/calendar/src/CalendarFB.ts"],"names":["initializeApp","getDatabase","ref","set","onValue","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","db","writeEvent","eventName","startTime","endTime","info","date","eventID","reference","getDateEvents","eventsRef","retEvents","snapshot","forEach","childSnapshot","currEvent","val","push","getAllDates","datesRef","swRef","child","retDates"],"mappings":"AAAA;AACA,SAASA,aAAT,QAA8B,cAA9B;AACA,SAASC,WAAT,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,OAAhC,QAAiE,mBAAjE,C,CAEA;AACA;AAEA;AACA;;AACA,MAAMC,cAAc,GAAG;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,iCAFS;AAGrBC,EAAAA,SAAS,EAAE,iBAHU;AAIrBC,EAAAA,aAAa,EAAE,6BAJM;AAKrBC,EAAAA,iBAAiB,EAAE,cALE;AAMrBC,EAAAA,KAAK,EAAE,2CANc;AAOrBC,EAAAA,aAAa,EAAE;AAPM,CAAvB,C,CAUA;;AAaA;AACA,MAAMC,GAAG,GAAGb,aAAa,CAACK,cAAD,CAAzB;AACA,MAAMS,EAAE,GAAGb,WAAW,EAAtB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASc,UAAT,CAAoBC,SAApB,EAAwCC,SAAxC,EAA4DC,OAA5D,EAA8EC,IAA9E,EAA4FC,IAA5F,EAA0GC,OAA1G,EAAiI;AAC/H,QAAMC,SAAS,GAAGpB,GAAG,CAACY,EAAD,EAAK,WAAWM,IAAX,GAAkB,GAAlB,GAAwBC,OAA7B,CAArB;AAEAlB,EAAAA,GAAG,CAACmB,SAAD,EAAY;AACbN,IAAAA,SAAS,EAAEA,SADE;AAEbC,IAAAA,SAAS,EAAEA,SAFE;AAGbC,IAAAA,OAAO,EAAEA,OAHI;AAIbC,IAAAA,IAAI,EAAEA;AAJO,GAAZ,CAAH;AAMD;AAED;AACA;AACA;AACA;;;AACA,SAASI,aAAT,CAAuBH,IAAvB,EAAgD;AAC5C,QAAMI,SAAS,GAAGtB,GAAG,CAACY,EAAD,EAAK,WAAWM,IAAhB,CAArB;AACA,MAAIK,SAAmB,GAAG,EAA1B,CAF4C,CAG5C;;AACArB,EAAAA,OAAO,CAACoB,SAAD,EAAaE,QAAD,IAAc;AAC/B;AACAA,IAAAA,QAAQ,CAACC,OAAT,CAAkBC,aAAD,IAAmB;AAClC,YAAMC,SAAS,GAAGD,aAAa,CAACE,GAAd,EAAlB;AACAL,MAAAA,SAAS,CAACM,IAAV,CAAeF,SAAS,CAACC,GAAzB;AACD,KAHD;AAID,GANM,CAAP;AAOA,SAAOL,SAAP;AACH;AAED;AACA;AACA;AACA;;;AACA,SAASO,WAAT,GAAoC;AAClC,QAAMC,QAAQ,GAAG/B,GAAG,CAACY,EAAD,EAAK,QAAL,CAApB,CADkC,CAElC;;AACA,QAAMoB,KAAK,GAAGD,QAAQ,CAACE,KAAvB;AACA,MAAIC,QAAqB,GAAG,EAA5B,CAJkC,CAKlC;AAEA;;AACAhC,EAAAA,OAAO,CAAC6B,QAAD,EAAYP,QAAD,IAAc;AAC9B;AACAA,IAAAA,QAAQ,CAACC,OAAT,CAAkBC,aAAD,IAAmB;AAClC;AACA,YAAMC,SAAS,GAAGD,aAAa,CAACE,GAAd,EAAlB;AACAM,MAAAA,QAAQ,CAACL,IAAT,CAAcF,SAAS,CAACC,GAAxB;AACD,KAJD;AAKD,GAPM,CAAP;AAQA,SAAOM,QAAP;AACD;;AAEDrB,UAAU,CAAC,gBAAD,EAAmB,OAAnB,EAA4B,OAA5B,EAAqC,cAArC,EAAqD,YAArD,EAAmE,GAAnE,CAAV;AACAA,UAAU,CAAC,OAAD,EAAU,OAAV,EAAmB,OAAnB,EAA4B,eAA5B,EAA6C,YAA7C,EAA2D,GAA3D,CAAV,C,CAEA;;AACA,eAAeiB,WAAf","sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, set, onValue, DatabaseReference} from 'firebase/database';\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDLBfzKNUMzRvsP_LeiRf31EJ-mJPVtf0o\",\n  authDomain: \"cs32termproject.firebaseapp.com\",\n  projectId: \"cs32termproject\",\n  storageBucket: \"cs32termproject.appspot.com\",\n  messagingSenderId: \"586091400920\",\n  appId: \"1:586091400920:web:a8a56afdc0bee2fd3ad1ad\",\n  measurementId: \"G-VP24Q6Q0E3\"\n};\n\n// Structure of dates and events as defined in calendar.tsx\ntype dateInfo = {\n  date : string;\n  // each date has many events\n  events : event[];\n}\ntype event = {\n  eventName : string;\n  startTime : string;\n  endTime : string;\n  info : string;\n}\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getDatabase();\n\n/**\n * Put an event into the database \n * \n * TODO: modify to just take a date object?\n * @param eventName \n * @param startTime \n * @param endTime \n * @param info \n * @param date \n * @param eventID \n */\nfunction writeEvent(eventName : string, startTime : string, endTime : string, info: string, date: string, eventID: string) : void{ \n  const reference = ref(db, 'Dates/' + date + '/' + eventID);\n\n  set(reference, {\n    eventName: eventName,\n    startTime: startTime,\n    endTime: endTime,\n    info: info\n  })\n}\n\n/**\n * Given a string for a date, get all of the events for the date\n * @returns a list of event objects\n */\nfunction getDateEvents(date : string) : event[] {\n    const eventsRef = ref(db, 'Dates/' + date)\n    let retEvents : event[] = []\n    // get the events at this date\n    onValue(eventsRef, (snapshot) => {\n      // iterate and add each to return list\n      snapshot.forEach((childSnapshot) => {\n        const currEvent = childSnapshot.val();\n        retEvents.push(currEvent.val);\n      })  \n    });\n    return retEvents\n}\n\n/**\n * Get all of the dates that have been added to the database.\n * @returns a list of dateInfo objects\n */\nfunction getAllDates() : dateInfo[] { \n  const datesRef = ref(db, 'Dates/')\n  // const swRef = ref(db, datesRef.key + \"/\" + \"2022-04-29\")\n  const swRef = datesRef.child\n  let retDates : dateInfo[] = []\n  // get all dates that have been added\n\n  //TODO: figure out how to loop through the fucking keys\n  onValue(datesRef, (snapshot) => {\n    // iterate and add each to return list\n    snapshot.forEach((childSnapshot) => {\n      //TODO: could be an error depending on how date directories work \"'/' creates an additional layer\"\n      const currEvent = childSnapshot.val();\n      retDates.push(currEvent.val);\n    })  \n  });\n  return retDates\n}\n\nwriteEvent(\"Spring Weekend\", \"18:30\", \"22:30\", \"Annual thing\", \"2022-04-29\", \"0\");\nwriteEvent(\"lunch\", \"12:00\", \"13:00\", \"food optional\", \"2022-04-29\", \"1\");\n\n// TODO: figure out what to export\nexport default getAllDates"]},"metadata":{},"sourceType":"module"}